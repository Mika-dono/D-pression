<div class="login-page">
  <div class="login-bg">
    <div class="bg-gradient"></div>
    <div class="bg-grid"></div>
  </div>

  <div class="login-container">
    <a routerLink="/" class="back-link">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M19 12H5M12 19l-7-7 7-7"/>
      </svg>
      Retour
    </a>

    <div class="login-card">
      <div class="card-header">
        <div class="logo">KYOJIN<span class="accent">KJX</span></div>
        <h1 class="card-title">{{ isLoginMode ? 'Connexion' : 'Créer un compte' }}</h1>
        <p class="card-subtitle">
          {{ isLoginMode ? 'Accédez à votre espace membre' : 'Rejoignez la communauté Kyojin KJX' }}
        </p>
      </div>

      <!-- Error/Success Messages -->
      <div class="alert alert-error" *ngIf="error">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/>
        </svg>
        {{ error }}
      </div>
      
      <div class="alert alert-success" *ngIf="success">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/>
        </svg>
        {{ success }}
      </div>

      <!-- Login Form -->
      <form *ngIf="isLoginMode" class="auth-form" (ngSubmit)="onLogin()">
        <div class="form-group">
          <label class="form-label">Email</label>
          <div class="input-wrapper">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
              <polyline points="22,6 12,13 2,6"/>
            </svg>
            <input type="email" class="form-input" [(ngModel)]="loginForm.email" 
                   name="email" placeholder="votre@email.com" required>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Mot de passe</label>
          <div class="input-wrapper">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
              <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
            </svg>
            <input type="password" class="form-input" [(ngModel)]="loginForm.password" 
                   name="password" placeholder="••••••••" required>
          </div>
        </div>

        <button type="submit" class="btn-submit" [disabled]="isLoading">
          <span *ngIf="!isLoading">Se connecter</span>
          <span *ngIf="isLoading" class="spinner"></span>
        </button>
      </form>

      <!-- Register Form -->
      <form *ngIf="!isLoginMode" class="auth-form" (ngSubmit)="onRegister()">
        <div class="form-group">
          <label class="form-label">Nom d'utilisateur</label>
          <div class="input-wrapper">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
              <circle cx="12" cy="7" r="4"/>
            </svg>
            <input type="text" class="form-input" [(ngModel)]="registerForm.username" 
                   name="username" placeholder="Votre pseudo" required>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Email</label>
          <div class="input-wrapper">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
              <polyline points="22,6 12,13 2,6"/>
            </svg>
            <input type="email" class="form-input" [(ngModel)]="registerForm.email" 
                   name="email" placeholder="votre@email.com" required>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Mot de passe</label>
          <div class="input-wrapper">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
              <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
            </svg>
            <input type="password" class="form-input" [(ngModel)]="registerForm.password" 
                   name="password" placeholder="Min. 6 caractères" required>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Confirmer le mot de passe</label>
          <div class="input-wrapper">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
              <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
            </svg>
            <input type="password" class="form-input" [(ngModel)]="registerForm.confirmPassword" 
                   name="confirmPassword" placeholder="••••••••" required>
          </div>
        </div>

        <button type="submit" class="btn-submit" [disabled]="isLoading">
          <span *ngIf="!isLoading">Créer mon compte</span>
          <span *ngIf="isLoading" class="spinner"></span>
        </button>
      </form>

      <div class="card-footer">
        <p *ngIf="isLoginMode">
          Pas encore de compte ? 
          <button class="link-btn" (click)="toggleMode()">S'inscrire</button>
        </p>
        <p *ngIf="!isLoginMode">
          Déjà un compte ? 
          <button class="link-btn" (click)="toggleMode()">Se connecter</button>
        </p>
      </div>
    </div>
  </div>
</div>
