<!-- ========================================
     MEMBERSHIP PAGE - T1.GG INSPIRED
     Premium Esports Membership Plans
     ======================================== -->

<div class="membership-page">
  <!-- Hero Section -->
  <section class="page-hero">
    <div class="hero-bg">
      <div class="hero-gradient"></div>
      <div class="hero-grid"></div>
      <div class="hero-glow"></div>
    </div>
    
    <div class="hero-container">
      <div class="hero-content animate-on-scroll">
        <span class="page-badge">
          <span class="badge-icon">üëë</span>
          <span class="badge-text">MEMBERSHIP</span>
        </span>
        <h1 class="page-title">
          <span class="title-line">REJOIGNEZ</span>
          <span class="title-line accent">L'√âLITE</span>
        </h1>
        <p class="page-subtitle">
          Devenez membre de la communaut√© Kyojin KJX et acc√©dez √† des avantages 
          exclusifs : contenus backstage, r√©ductions, Discord priv√© et bien plus.
        </p>
        
        <!-- Community Stats -->
        <div class="hero-stats">
          <div class="stat-item">
            <span class="stat-value">{{ communityStats.members | number }}</span>
            <span class="stat-label">Membres</span>
          </div>
          <div class="stat-divider"></div>
          <div class="stat-item">
            <span class="stat-value">{{ communityStats.discordMembers | number }}</span>
            <span class="stat-label">Discord</span>
          </div>
          <div class="stat-divider"></div>
          <div class="stat-item">
            <span class="stat-value">{{ communityStats.countries }}+</span>
            <span class="stat-label">Pays</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Pricing Section -->
  <section class="pricing-section">
    <div class="section-container">
      <div class="section-header animate-on-scroll">
        <span class="section-badge">üíé NOS FORMULES</span>
        <h2 class="section-title">Choisissez votre <span class="accent">Plan</span></h2>
        <p class="section-subtitle">Des formules adapt√©es √† chaque fan, de l'acc√®s gratuit √† l'exp√©rience VIP compl√®te</p>
      </div>
      
      <div class="pricing-grid">
        <article *ngFor="let plan of memberships; let i = index" 
                 class="pricing-card animate-on-scroll"
                 [class.popular]="plan.popular"
                 [class.selected]="selectedPlan === plan.id"
                 [style.animation-delay]="(i * 0.1) + 's'"
                 (click)="selectPlan(plan.id)">
          
          <!-- Popular Badge -->
          <div class="popular-badge" *ngIf="plan.popular">
            <span>‚≠ê POPULAIRE</span>
          </div>
          
          <div class="card-header">
            <div class="plan-icon">{{ plan.icon }}</div>
            <h3 class="plan-name">{{ plan.name }}</h3>
            <p class="plan-description">{{ plan.description }}</p>
          </div>
          
          <div class="card-pricing">
            <div class="price-wrapper">
              <span class="price-amount">{{ formatPrice(plan.price) }}</span>
              <span class="price-period" *ngIf="plan.price > 0">{{ plan.period }}</span>
            </div>
          </div>
          
          <div class="card-benefits">
            <ul class="benefits-list">
              <li *ngFor="let benefit of plan.benefits" class="benefit-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="benefit-icon">
                  <polyline points="20 6 9 17 4 12"/>
                </svg>
                <span>{{ benefit }}</span>
              </li>
            </ul>
          </div>
          
          <div class="card-action">
            <button class="btn-subscribe" [class.btn-primary]="plan.popular" (click)="subscribeTo(plan); $event.stopPropagation()">
              <span>{{ plan.price === 0 ? 'Rejoindre' : 'S\'abonner' }}</span>
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M5 12h14M12 5l7 7-7 7"/>
              </svg>
            </button>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- Features Section -->
  <section class="features-section">
    <div class="section-container">
      <div class="section-header animate-on-scroll">
        <span class="section-badge">üéÅ AVANTAGES</span>
        <h2 class="section-title">Pourquoi devenir <span class="accent">Membre</span></h2>
      </div>
      
      <div class="features-grid">
        <div class="feature-card animate-on-scroll">
          <div class="feature-icon">üí¨</div>
          <h3 class="feature-title">Discord Exclusif</h3>
          <p class="feature-text">Acc√©dez aux salons priv√©s et discutez directement avec l'√©quipe et la communaut√©.</p>
        </div>
        
        <div class="feature-card animate-on-scroll">
          <div class="feature-icon">üé¨</div>
          <h3 class="feature-title">Behind-the-Scenes</h3>
          <p class="feature-text">D√©couvrez l'envers du d√©cor avec des contenus exclusifs sur nos entra√Ænements et √©v√©nements.</p>
        </div>
        
        <div class="feature-card animate-on-scroll">
          <div class="feature-icon">üõçÔ∏è</div>
          <h3 class="feature-title">R√©ductions Boutique</h3>
          <p class="feature-text">Profitez de remises exclusives sur tout le merchandise officiel Kyojin KJX.</p>
        </div>
        
        <div class="feature-card animate-on-scroll">
          <div class="feature-icon">üé§</div>
          <h3 class="feature-title">Q&A avec les Joueurs</h3>
          <p class="feature-text">Participez √† des sessions questions-r√©ponses mensuelles avec nos joueurs pros.</p>
        </div>
        
        <div class="feature-card animate-on-scroll">
          <div class="feature-icon">üéüÔ∏è</div>
          <h3 class="feature-title">Acc√®s Events VIP</h3>
          <p class="feature-text">Invitations prioritaires √† nos √©v√©nements et meet & greets exclusifs.</p>
        </div>
        
        <div class="feature-card animate-on-scroll">
          <div class="feature-icon">üèÖ</div>
          <h3 class="feature-title">Badges & √âmotes</h3>
          <p class="feature-text">D√©bloquez des badges exclusifs et √©motes personnalis√©es pour la communaut√©.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Testimonials -->
  <section class="testimonials-section">
    <div class="section-container">
      <div class="section-header animate-on-scroll">
        <span class="section-badge">üí¨ T√âMOIGNAGES</span>
        <h2 class="section-title">Ce qu'ils en <span class="accent">Pensent</span></h2>
      </div>
      
      <div class="testimonials-grid">
        <article *ngFor="let testimonial of testimonials" class="testimonial-card animate-on-scroll">
          <div class="testimonial-content">
            <p class="testimonial-text">"{{ testimonial.text }}"</p>
          </div>
          <div class="testimonial-author">
            <div class="author-avatar">{{ testimonial.avatar }}</div>
            <div class="author-info">
              <span class="author-name">{{ testimonial.name }}</span>
              <span class="author-plan">Membre {{ testimonial.plan }}</span>
            </div>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- FAQ Section -->
  <section class="faq-section">
    <div class="section-container">
      <div class="section-header animate-on-scroll">
        <span class="section-badge">‚ùì FAQ</span>
        <h2 class="section-title">Questions <span class="accent">Fr√©quentes</span></h2>
      </div>
      
      <div class="faq-grid">
        <div class="faq-item animate-on-scroll">
          <h3 class="faq-question">Comment puis-je annuler mon abonnement ?</h3>
          <p class="faq-answer">Vous pouvez annuler √† tout moment depuis votre espace membre. L'acc√®s reste actif jusqu'√† la fin de la p√©riode pay√©e.</p>
        </div>
        
        <div class="faq-item animate-on-scroll">
          <h3 class="faq-question">Les r√©ductions boutique sont-elles cumulables ?</h3>
          <p class="faq-answer">Les r√©ductions membre s'appliquent sur le prix public et ne sont pas cumulables avec les promotions en cours.</p>
        </div>
        
        <div class="faq-item animate-on-scroll">
          <h3 class="faq-question">Comment acc√©der au Discord priv√© ?</h3>
          <p class="faq-answer">Apr√®s votre inscription, vous recevrez un lien d'invitation par email. Liez votre compte Discord pour acc√©der aux salons exclusifs.</p>
        </div>
        
        <div class="faq-item animate-on-scroll">
          <h3 class="faq-question">Puis-je changer de formule ?</h3>
          <p class="faq-answer">Oui ! Vous pouvez upgrader ou downgrader votre formule √† tout moment. Le changement prend effet imm√©diatement.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="cta-section">
    <div class="section-container">
      <div class="cta-card animate-on-scroll">
        <div class="cta-bg">
          <div class="cta-gradient"></div>
          <div class="cta-pattern"></div>
        </div>
        <div class="cta-content">
          <h2 class="cta-title">Pr√™t √† rejoindre la famille ?</h2>
          <p class="cta-text">
            Choisissez votre formule et devenez membre de la communaut√© Kyojin KJX d√®s aujourd'hui.
          </p>
          <div class="cta-actions">
            <a href="#" class="btn-primary btn-large">
              <span>Commencer maintenant</span>
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M5 12h14M12 5l7 7-7 7"/>
              </svg>
            </a>
            <a routerLink="/shop" class="btn-outline">
              <span>Voir la boutique</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>

<!-- ========================================
     PAYMENT MODAL
     ======================================== -->
<div class="payment-modal-overlay" *ngIf="showPaymentModal" (click)="closePaymentModal()">
  <div class="payment-modal" (click)="$event.stopPropagation()">
    <!-- Modal Header -->
    <div class="modal-header">
      <div class="modal-title-section">
        <h2 class="modal-title">
          {{ paymentStep === 'success' ? '‚úÖ Paiement r√©ussi' : 
             paymentStep === 'error' ? '‚ùå Erreur' :
             paymentStep === 'processing' ? '‚è≥ Traitement...' : 'üí≥ Paiement' }}
        </h2>
        <p class="modal-subtitle" *ngIf="selectedMembership && paymentStep !== 'success'">
          {{ selectedMembership.name }} - {{ formatPrice(selectedMembership.price) }}{{ selectedMembership.period }}
        </p>
      </div>
      <button class="modal-close" (click)="closePaymentModal()" *ngIf="paymentStep !== 'processing'">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
        </svg>
      </button>
    </div>

    <!-- Step: Select Payment Method -->
    <div class="modal-content" *ngIf="paymentStep === 'select'">
      <p class="method-instruction">Choisissez votre m√©thode de paiement :</p>
      
      <div class="payment-methods-grid">
        <button class="payment-method-btn" (click)="selectPaymentMethod('card')">
          <div class="method-icon">üí≥</div>
          <div class="method-info">
            <span class="method-name">Carte bancaire</span>
            <span class="method-desc">Visa, Mastercard, Amex</span>
          </div>
          <svg class="method-arrow" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 18l6-6-6-6"/>
          </svg>
        </button>
        
        <button class="payment-method-btn paypal" (click)="selectPaymentMethod('paypal')">
          <div class="method-icon">üÖøÔ∏è</div>
          <div class="method-info">
            <span class="method-name">PayPal</span>
            <span class="method-desc">Paiement s√©curis√© PayPal</span>
          </div>
          <svg class="method-arrow" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 18l6-6-6-6"/>
          </svg>
        </button>
        
        <button class="payment-method-btn stripe" (click)="selectPaymentMethod('stripe')">
          <div class="method-icon">‚ö°</div>
          <div class="method-info">
            <span class="method-name">Stripe</span>
            <span class="method-desc">Paiement rapide et s√©curis√©</span>
          </div>
          <svg class="method-arrow" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 18l6-6-6-6"/>
          </svg>
        </button>
        
        <button class="payment-method-btn wise" (click)="selectPaymentMethod('wise')">
          <div class="method-icon">üåç</div>
          <div class="method-info">
            <span class="method-name">Wise</span>
            <span class="method-desc">Transfert international</span>
          </div>
          <svg class="method-arrow" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 18l6-6-6-6"/>
          </svg>
        </button>
      </div>
      
      <div class="secure-notice">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/>
        </svg>
        <span>Paiement 100% s√©curis√© - Donn√©es crypt√©es SSL</span>
      </div>
    </div>

    <!-- Step: Credit Card Form -->
    <div class="modal-content" *ngIf="paymentStep === 'card'">
      <button class="back-btn" (click)="backToMethodSelection()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M15 18l-6-6 6-6"/>
        </svg>
        Retour
      </button>
      
      <div class="test-card-info">
        <span class="test-badge">üß™ TEST</span>
        <span>Carte: 4242 4242 4242 4242 | Exp: 12/28 | CVV: 123</span>
      </div>
      
      <form class="card-form" (ngSubmit)="processCardPayment()">
        <div class="form-group">
          <label class="form-label">Num√©ro de carte *</label>
          <div class="card-input-wrapper">
            <input 
              type="text" 
              class="form-input card-number-input"
              [class.error]="cardErrors['cardNumber']"
              placeholder="1234 5678 9012 3456"
              [ngModel]="cardForm.cardNumber"
              (input)="onCardNumberInput($event)"
              name="cardNumber"
              maxlength="19"
              autocomplete="cc-number"
            />
            <span class="card-brand-badge">{{ getCardBrandIcon() }}</span>
          </div>
          <span class="error-text" *ngIf="cardErrors['cardNumber']">{{ cardErrors['cardNumber'] }}</span>
        </div>
        
        <div class="form-row">
          <div class="form-group half">
            <label class="form-label">Date d'expiration *</label>
            <input 
              type="text" 
              class="form-input"
              [class.error]="cardErrors['expiryDate']"
              placeholder="MM/YY"
              [ngModel]="cardForm.expiryDate"
              (input)="onExpiryInput($event)"
              name="expiryDate"
              maxlength="5"
              autocomplete="cc-exp"
            />
            <span class="error-text" *ngIf="cardErrors['expiryDate']">{{ cardErrors['expiryDate'] }}</span>
          </div>
          
          <div class="form-group half">
            <label class="form-label">CVV *</label>
            <input 
              type="text" 
              class="form-input"
              [class.error]="cardErrors['cvv']"
              placeholder="123"
              [ngModel]="cardForm.cvv"
              (input)="onCvvInput($event)"
              name="cvv"
              maxlength="4"
              autocomplete="cc-csc"
            />
            <span class="error-text" *ngIf="cardErrors['cvv']">{{ cardErrors['cvv'] }}</span>
          </div>
        </div>
        
        <div class="form-group">
          <label class="form-label">Nom du titulaire *</label>
          <input 
            type="text" 
            class="form-input"
            [class.error]="cardErrors['cardHolder']"
            placeholder="JEAN DUPONT"
            [(ngModel)]="cardForm.cardHolder"
            name="cardHolder"
            autocomplete="cc-name"
          />
          <span class="error-text" *ngIf="cardErrors['cardHolder']">{{ cardErrors['cardHolder'] }}</span>
        </div>
        
        <div class="form-group">
          <label class="form-label">Email *</label>
          <input 
            type="email" 
            class="form-input"
            [class.error]="cardErrors['email']"
            placeholder="votre@email.com"
            [(ngModel)]="cardForm.email"
            name="email"
            autocomplete="email"
          />
          <span class="error-text" *ngIf="cardErrors['email']">{{ cardErrors['email'] }}</span>
        </div>
        
        <div class="form-divider">
          <span>Adresse de facturation (optionnel)</span>
        </div>
        
        <div class="form-group">
          <label class="form-label">Adresse</label>
          <input 
            type="text" 
            class="form-input"
            placeholder="123 Rue Example"
            [(ngModel)]="cardForm.billingAddress"
            name="billingAddress"
          />
        </div>
        
        <div class="form-row">
          <div class="form-group half">
            <label class="form-label">Ville</label>
            <input 
              type="text" 
              class="form-input"
              placeholder="Paris"
              [(ngModel)]="cardForm.billingCity"
              name="billingCity"
            />
          </div>
          <div class="form-group half">
            <label class="form-label">Code postal</label>
            <input 
              type="text" 
              class="form-input"
              placeholder="75001"
              [(ngModel)]="cardForm.billingPostalCode"
              name="billingPostalCode"
            />
          </div>
        </div>
        
        <button type="submit" class="btn-pay">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/>
          </svg>
          Payer {{ formatPrice(selectedMembership?.price || 0) }}
        </button>
      </form>
    </div>

    <!-- Step: PayPal -->
    <div class="modal-content" *ngIf="paymentStep === 'paypal'">
      <button class="back-btn" (click)="backToMethodSelection()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M15 18l-6-6 6-6"/>
        </svg>
        Retour
      </button>
      
      <div class="paypal-section">
        <div class="paypal-logo">üÖøÔ∏è PayPal</div>
        <p class="paypal-info">Cliquez sur le bouton ci-dessous pour payer via PayPal de mani√®re s√©curis√©e.</p>
        <div id="paypal-button-container" class="paypal-button-container"></div>
      </div>
    </div>

    <!-- Step: Stripe -->
    <div class="modal-content" *ngIf="paymentStep === 'stripe'">
      <button class="back-btn" (click)="backToMethodSelection()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M15 18l-6-6 6-6"/>
        </svg>
        Retour
      </button>
      
      <div class="stripe-section">
        <div class="stripe-logo">‚ö° Stripe</div>
        
        <div class="form-group">
          <label class="form-label">Email *</label>
          <input 
            type="email" 
            class="form-input"
            [class.error]="cardErrors['email']"
            placeholder="votre@email.com"
            [(ngModel)]="cardForm.email"
          />
          <span class="error-text" *ngIf="cardErrors['email']">{{ cardErrors['email'] }}</span>
        </div>
        
        <div class="form-group">
          <label class="form-label">Carte bancaire</label>
          <div id="stripe-card-element" class="stripe-element"></div>
        </div>
        
        <button class="btn-pay stripe-btn" (click)="processStripePayment()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
          </svg>
          Payer {{ formatPrice(selectedMembership?.price || 0) }} avec Stripe
        </button>
      </div>
    </div>

    <!-- Step: Wise -->
    <div class="modal-content" *ngIf="paymentStep === 'wise'">
      <button class="back-btn" (click)="backToMethodSelection()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M15 18l-6-6 6-6"/>
        </svg>
        Retour
      </button>
      
      <div class="wise-section">
        <div class="wise-logo">üåç Wise</div>
        <p class="wise-info">Transfert international s√©curis√© avec Wise (anciennement TransferWise).</p>
        
        <div class="form-group">
          <label class="form-label">Email *</label>
          <input 
            type="email" 
            class="form-input"
            [class.error]="cardErrors['email']"
            placeholder="votre@email.com"
            [(ngModel)]="cardForm.email"
          />
        </div>
        
        <div class="form-group">
          <label class="form-label">Nom complet</label>
          <input 
            type="text" 
            class="form-input"
            placeholder="Jean Dupont"
            [(ngModel)]="cardForm.cardHolder"
          />
        </div>
        
        <button class="btn-pay wise-btn" (click)="processWisePayment()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/><path d="M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
          </svg>
          Payer {{ formatPrice(selectedMembership?.price || 0) }} avec Wise
        </button>
      </div>
    </div>

    <!-- Step: Processing -->
    <div class="modal-content processing" *ngIf="paymentStep === 'processing'">
      <div class="processing-animation">
        <div class="spinner"></div>
      </div>
      <h3 class="processing-title">Traitement en cours...</h3>
      <p class="processing-text">Veuillez ne pas fermer cette fen√™tre.</p>
    </div>

    <!-- Step: Success -->
    <div class="modal-content success" *ngIf="paymentStep === 'success'">
      <div class="success-icon">‚úÖ</div>
      <h3 class="success-title">Paiement r√©ussi !</h3>
      <p class="success-text">
        Merci pour votre abonnement {{ selectedMembership?.name }}.<br>
        Un email de confirmation a √©t√© envoy√©.
      </p>
      <div class="transaction-info" *ngIf="paymentResult">
        <span class="transaction-label">Transaction ID:</span>
        <span class="transaction-value">{{ paymentResult.transactionId }}</span>
      </div>
      <button class="btn-primary" (click)="closePaymentModal()">Fermer</button>
    </div>

    <!-- Step: Error -->
    <div class="modal-content error" *ngIf="paymentStep === 'error'">
      <div class="error-icon">‚ùå</div>
      <h3 class="error-title">√âchec du paiement</h3>
      <p class="error-text">{{ paymentError }}</p>
      <div class="error-actions">
        <button class="btn-secondary" (click)="retryPayment()">R√©essayer</button>
        <button class="btn-outline" (click)="backToMethodSelection()">Changer de m√©thode</button>
      </div>
    </div>
  </div>
</div>